<main>
<nav class="navbar navbar-expand-lg  shadow-lg option font-family">
    <div class="container">
        <div  class="selectOptions text-focus-in  font-family">
        <form  [formGroup]="searchBar">
          <input #findListing formControlName="search" class=" me-2 ml-5 searchBar main-font" type="search" placeholder="eg. 2144 Oceanside Boulevard, Oceanside, CA 92054" aria-label="Search">
          <button class="searchButton main-font"  type="submit" [disabled]="!searchBar.valid"  (click)="searchListing(findListing.value)" ><i class="fa fa-search" aria-hidden="true"></i></button>
          <button class="contactButton"  (click)="openModalWithClass(moreOptions)" >
            <a class="" type="button"  >
              <i class="fa fa-filter" aria-hidden="true"></i>
            </a>
          </button>
          <button class="mapButton"  (click)="mapViewTablet()">
            <a class="" type="button"  >
              <i class="fa fa-map-o" aria-hidden="true"></i>
            </a>
          </button>
        </form>
      </div>
      
  
      <!-- <div class="selectdiv filter2">
        <label>
            <select (change)="pricechange($event.target.value)">
              <option [value] = "-1">{{currentPrice == -1?'Max Price': currentPrice}}</option>
                <option [value]= "-1" >--No Max--</option>
                <option [value]= "price" *ngFor="let price of priceSelect">{{price| currency:'USD':'symbol':'2.0-2'}}</option>
            </select>
        </label>
      </div>
      <div class="selectdiv filter2">
        <label>
            <select (change)="priceSort($event.target.value)">
              <option [value]="-1">Price Sort</option>
              <option [value]="1">(High to low)</option>
              <option [value]="2">(Low to High)</option>
            </select>
        </label>
      </div>
      <div class="selectdiv filter2">
        <label class="adjust-space">
            <select  (change)="bedchange($event.target.value)">
                <option  id="one" [value]=-1>Beds</option>
                <option [value]=1>1+</option>
                <option [value]=2>2+</option>
                <option [value]=3>3+</option>
                <option [value]=4>4+</option>
                <option [value]=5>5+</option>
                <option [value]=6>6+</option>
                <option [value]=7>7+</option>
                <option [value]=8>8+</option>
                <option [value]=9>9+</option>
                <option [value]=10>10+</option>
                
            </select>
        </label>
      </div>
      <div class="selectdiv filter2">
        <label  class="adjust-space">
            <select   (change)="bathchange($event.target.value)">
              <option id="one" [value]=-1>Baths</option>
              <option [value]=1>1+</option>
              <option [value]=2>2+</option>
              <option [value]=3>3+</option>
              <option [value]=4>4+</option>
              <option [value]=5>5+</option>
              <option [value]=6>6+</option>
              <option [value]=7>7+</option>
              <option [value]=8>8+</option>
              <option [value]=9>9+</option>
              <option [value]=10>10+</option>
            </select>
        </label>
      </div>
      <div class="selectdiv filter2">
        <label  class="adjust-space">
            <select (change)="estimatedSqFt($event.target.value)">
              <option value="-1">Sq. Ft.</option>
              <option value="500" >500</option>
              <option value="750">750</option>
              <option value="1000">1,000</option>
              <option value="1500">1,500</option>
              <option value="2000">2,000</option>
              <option value="2500">2,500</option>
              <option value="3000">3,000</option>
              <option value="3500">3,500</option>
              <option value="4000">4,000</option>
              <option value="4500">4,500</option>
              <option value="5000">5,000</option>
              <option value="5500">5,500</option>
              <option value="6000">6,000</option>
              <option value="6500">6,500</option>
              <option value="7000">7,000</option>
              <option value="10000">10,000</option>
              <option value="20000">20,000</option>
              <option value="30000">30,000</option>
            </select>
        </label>
      </div> -->
      <div class="dropdown">
        <button  class="listing-status adjust-space" >{{ListingParams.bathtotals == -1?'Baths': ListingParams.bathtotals }}<span 
      *ngIf="ListingParams.bathtotals !== -1">+</span></button>
        <div class="dropdown-content" id="price-drpdwn" >
          <ul>
            <a href="javascript:void(0)" (click)="bathchange($event.target.value)"><li [value]= "bath" *ngFor="let bath of bathSelect" >{{bath}}+</li></a>
          </ul>
        </div>
      </div>
      <div class="dropdown" >
        <button class="listing-status adjust-space">{{ListingParams.bedrooms == -1?'Beds': ListingParams.bedrooms }}<span 
      *ngIf="ListingParams.bedrooms !== -1">+</span></button>
        <div class="dropdown-content" id="price-drpdwn">
          <ul>
            <a href="javascript:void(0)" (click)="bedchange($event.target.value)"><li [value]= "bed" *ngFor="let bed of bedSelect" >{{bed}}+</li></a>
          </ul>
        </div>
      </div>
      <div class="dropdown">
        <button   class="listing-status adjust-space">{{currentSqft == '-1'?'Sq. Ft.': currentSqft +' Sq. Ft.'+ ' >'}}<span 
      *ngIf="selectedEst !== -1"><i class="fa fa-angle-right" aria-hidden="true"></i></span></button>
        <div class="dropdown-content" id="price-drpdwn">
          <ul>
            <a href="javascript:void(0)" (click)="estimatedSqFt($event.target.value)"><li [value]= "sqft" *ngFor="let sqft of sqftSelect" >{{sqft + ' >'}} </li></a>
          </ul>
        </div>
      </div>
      <div class="dropdown">
        <button   class="listing-status adjust-space">{{currentPrice == -1?'Max Price': currentPrice | currency:'USD':'symbol':'2.0-2'}}<span *ngIf="currentPrice !== -1"><i class="fa fa-angle-left" aria-hidden="true"></i></span></button>
        <div class="dropdown-content"  id="price-drpdwn">
          <ul>
            <a href="javascript:void(0)" (click)="pricechange($event.target.value)"><li  [value]= "-1" > No Max</li></a>
              <a href="javascript:void(0)" (click)="pricechange($event.target.value)"><li [value]= "price" *ngFor="let price of priceSelect" >{{price| currency:'USD':'symbol':'2.0-2'}}</li></a>
          </ul>
        </div>
      </div>
      <div class="dropdown">
        <button [innerHtml]="pricesortHTML"  class="listing-status adjust-space"></button>
        <div class="dropdown-content" id="price-sort">
          <ul>
            <a href="javascript:void(0)" (click)="priceSort($event.target.value)"><li [value]="1">(High to low)</li></a>
            <a href="javascript:void(0)" (click)="priceSort($event.target.value)"><li [value]="2">(Low to High)</li></a>
          </ul>
        </div>
      </div>
      <div class="dropdown">
        <!--</button> (click)="openModalWithClass(listingStatus)"-->
          <span  class="listing-status adjust-space">Listing Status</span>
          <div class="dropdown-content" id="listing-status-desktop">
            <div class="container-listing-status" >
              <div class="label-container">
                  <label>
                      <input type="checkbox" (click)=activeStatus($event) [checked]="activeSelected" >
                      <span class="checkmark"></span>
                      Active&nbsp;&nbsp;&nbsp;
                    </label>
                    <label>
                      <input type="checkbox" (click)=pendingStatus($event) [checked]="pendingSelected">
                      <span class="checkmark"></span>
                      Pending&nbsp;&nbsp;&nbsp;
                    </label>
                    <label>
                      <input type="checkbox" (click)=contingentStatus($event) [checked]="contingentSelected">
                      <span class="checkmark"></span>
                      Contingent&nbsp;&nbsp;&nbsp;
                    </label>
                    <label>
                      <input type="checkbox" (click)=bomStatus($event) [checked]="bomSelected">
                      <span class="checkmark"></span>
                      BOM&nbsp;&nbsp;&nbsp;
                    </label>
                    <label>
                      <input type="checkbox" (click)=forecloseStatus($event) [checked]="forecloseSelected">
                      <span class="checkmark"></span>
                      Foreclose&nbsp;&nbsp;&nbsp;
                    </label>
                    <label>
                      <input  type="checkbox" (click)=soldStatus($event) [checked]="soldSelected">
                      <span class="checkmark"></span>
                      Sold
                    </label>
              </div>
            </div>
          </div>
      </div>
    </div>
    
   
    
  </nav>
  
  <div class="splitscreen font-family">
    <div   class="left shadow-lg">
        <div class="listing_results">
          <div class="spacing"></div>
            <div class="list" *ngFor="let listing of listings" >
              <app-listing-card    [listing]= "listing"></app-listing-card>
            </div>
            <div class="pagination_listing_results1" #pagination>
                <pagination
                [maxSize]="maxSize"
                [boundaryLinks]="true"
                [totalItems]="totalCount"
                [itemsPerPage]="pagination.itemsPerPage"
                [(ngModel)]="pagination.currentPage"
                (pageChanged)="pageChanged($event)"
                previousText="&lsaquo;"
                nextText="&rsaquo;"
                firstText="&laquo;"
                lastText="&raquo;"
                class = "pagination">
              </pagination>
            </div>
        </div>
    </div>
  </div>
  

  <button  [ngStyle]="{'z-index':zMap}"  (click)="mapView()" class="map_list_button">
   <span *ngIf="isMapView" class="map_text_margin">
    <i class="fa fa-list" aria-hidden="true"></i>
    <!-- <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24"  >
  
      <path d="M3,5v14h18V5H3z M7,7v2H5V7H7z M5,13v-2h2v2H5z M5,15h2v2H5V15z M19,17H9v-2h10V17z M19,13H9v-2h10V13z M19,9H9V7h10V9z" />
    </svg> -->
   </span>
   <span *ngIf="!isMapView" class="map_text_margin">
    <i class="fa fa-map-o" aria-hidden="true"></i>
    <!-- <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" >
      <path d="M0 0h24v24H0V0z" fill="none"/>
      <path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM10 5.47l4 1.4v11.66l-4-1.4V5.47zm-5 .99l3-1.01v11.7l-3 1.16V6.46zm14 11.08l-3 1.01V6.86l3-1.16v11.84z"  stroke="white" stroke-width="1.5"/>
    </svg> -->
   </span>
  </button>
  <div [ngStyle]="{'z-index':zPagination}" class="pagination_listing_results" #pagination>
    <pagination
      [maxSize]="maxSize"
      [boundaryLinks]="true"
      [totalItems]="totalCount"
      [itemsPerPage]="pagination.itemsPerPage"
      [(ngModel)]="pagination.currentPage"
      (pageChanged)="pageChanged($event)"
      previousText="&lsaquo;"
      nextText="&rsaquo;"
      firstText="&laquo;"
      lastText="&raquo;"
      class="pagination">
    </pagination>
  </div>
  
  <div class="right">
    <agm-map [gestureHandling] ="location.gestureHandling" [ngStyle]="{'z-index':zIndex}"  [(latitude)]="location.lat"  [styles]="location.styles" [(longitude)]="location.lng" [clickableIcons]="location.clickableIcons" [(showDefaultInfoWindow)] ="location.showDefaultInfoWindow" [disableDefaultUI]="location.disableDefaultUI" [(zoom)]="location.zoom" [draggable]="location.draggable">
      <agm-marker-cluster [styles]="markerClusterIconStyles"  imagePath="https://pngimg.com/uploads/circle/circle_PNG79.png">
       
         <agm-marker *ngFor="let markers of listings" class="myMap"  [latitude]="markers.lat" [longitude]="markers.lon"   [iconUrl]="location. iconUrl" [agmFitBounds]="true"  >
          <div  > </div>
           <agm-snazzy-info-window (click) ="openModalWithComponent(markers.id, markers.listingPictures, markers.price,markers.bedrooms, markers.bathsFull, markers.bathsHalf, markers.estimatedSquareFeet, markers.FullAddress)"  [latitude]="markers.lat" [padding]="location.padding" [longitude]="markers.lon" [border]="location.border" [borderRadius]="location. borderRadius" [maxWidth]="mapCard.maxWidth" [maxHeight]="mapCard.maxHeight"  [closeWhenOthersOpen]="true">
              <ng-template>
                <div class="marker">
                  <a  (click)='redirect(markers.id)'><img src="{{markers.listingPictures}}"  style="border-radius: 0px;"   alt="..." onerror="this.onerror=null; this.src='../assets/NoPhotoAvailable.jpg';" ></a>
                  <div class="card-body cardBody main-font" style="color:black;">
                    <h5 class="card-title cardTitle">{{markers.price}}</h5>
                    <p class="card-text m-0 cardText">{{markers.bedrooms}} Beds | {{markers.bathFull + markers.bathsHalf}} Baths | {{markers. estimatedSquareFeet}} SQFT</p>
                    <a class="btn tracking-in-expand" routerLink ='/forsale'><span>View Details</span></a>
                  </div>
                </div>
              </ng-template>
            </agm-snazzy-info-window>
         
          </agm-marker>
    </agm-marker-cluster>
    </agm-map>
      
  </div>
</main> 

















<ng-template  #listingStatus>
  <button type="button" class="close" (click)="modalRef.hide()">
    &times;
  </button>
  <h1 class="status-title">Listing Status</h1>
  <div class="container-listing-status">
    <div class="label-container">
        <label>
            <input type="checkbox" (click)=activeStatus($event) [checked]="activeSelected" >
            <span class="checkmark"></span>
            Active&nbsp;&nbsp;&nbsp;
          </label>
          <label>
            <input type="checkbox" (click)=pendingStatus($event) [checked]="pendingSelected">
            <span class="checkmark"></span>
            Pending&nbsp;&nbsp;&nbsp;
          </label>
          <label>
            <input type="checkbox" (click)=contingentStatus($event) [checked]="contingentSelected">
            <span class="checkmark"></span>
            Contingent&nbsp;&nbsp;&nbsp;
          </label>
          <label>
            <input type="checkbox" (click)=bomStatus($event) [checked]="bomSelected">
            <span class="checkmark"></span>
            BOM&nbsp;&nbsp;&nbsp;
          </label>
          <label>
            <input type="checkbox" (click)=forecloseStatus($event) [checked]="forecloseSelected">
            <span class="checkmark"></span>
            Foreclose&nbsp;&nbsp;&nbsp;
          </label>
          <label>
            <input  type="checkbox" (click)=soldStatus($event) [checked]="soldSelected">
            <span class="checkmark"></span>
            Sold
          </label>
    </div>
  </div>

</ng-template>
  
  <ng-template #moreOptions   >
    <button type="button" class="close" (click)="modalRef.hide()">
      &times;
    </button>
      <div class="container">
          <h1 class="mobile">Bed</h1>
          <div class="filter-cat">
              <div  class="selectdiv">
                  <label>
                    <select  id="mobileBtnBed"  (change)="bedchange($event.target.value)">
                      <option   id="one" [value]=-1>{{currentBed == -1?'Beds': currentBed +'+'}}</option>
                      <option [value]=1>1+</option>
                      <option [value]=2>2+</option>
                      <option [value]=3>3+</option>
                      <option [value]=4>4+</option>
                      <option [value]=5>5+</option>
                      <option [value]=6>6+</option>
                      <option [value]=7>7+</option>
                      <option [value]=8>8+</option>
                      <option [value]=9>9+</option>
                      <option [value]=10>10+</option>
                      
                  </select>
                  </label>
                </div> 
          </div>
          <h1 class="mobile">Bath</h1>
          <div class="filter-cat">
              <div class="selectdiv">
                  <label>
                    <select  id="mobileBtnBath" (change)="bathchange($event.target.value)">
                      <option id="one" [value]=-1>{{currentBath == -1?'Baths': currentBath +'+'}}</option>
                      <option [value]=1>1+</option>
                      <option [value]=2>2+</option>
                      <option [value]=3>3+</option>
                      <option [value]=4>4+</option>
                      <option [value]=5>5+</option>
                      <option [value]=6>6+</option>
                      <option [value]=7>7+</option>
                      <option [value]=8>8+</option>
                      <option [value]=9>9+</option>
                      <option [value]=10>10+</option>
                    </select>
                  </label>
                </div>
          </div>
          <h1 class="mobile">Price</h1>
          <div class="filter-cat">
              <div class="selectdiv">
                  <label>
                    <select id="mobileBtnPrice" (change)="pricechange($event.target.value)">
                      <option [value] = "-1">{{currentPrice == -1?'Max Price': currentPrice + ' <'}}</option>
                        <option [value]= "-1" >--No Max--</option>
                        <option [value]= "price" *ngFor="let price of priceSelect">{{'$'+ price + ' <' }}</option>
                    </select>
                  </label>
                </div>
          </div> 
          <div id="price-spacing">

          </div>
          <div class="filter-cat">
                <div class="selectdiv">
                  <label>
                    <select id="mobileBtnSort" (change)="priceSort($event.target.value)">
                      <option [value]="-1">{{currentSort == -1?'Price Sort': currentSort}}</option>
                      <option [value]="1">(High to low)</option>
                      <option [value]="2">(Low to High)</option>
                    </select>
                  </label>
                </div>
          </div>
    
          <h1 class="mobile">Square Feet</h1>
          <div class="filter-cat">
              <div class="selectdiv">
                  <label>
                    <select id="mobileBtnSqft" (change)="estimatedSqFt($event.target.value)">
                      <option value="-1">{{currentSqft == -1?'Sq. Ft.': currentSqft + ' >'}}</option>
                      <option value="500" >500 > </option>
                      <option value="750">750 ></option>
                      <option value="1000">1000 ></option>
                      <option value="1500">1500 ></option>
                      <option value="2000">2000 ></option>
                      <option value="2500">2500 ></option>
                      <option value="3000">3000 ></option>
                      <option value="3500">3500 ></option>
                      <option value="4000">4000 ></option>
                      <option value="4500">4500 ></option>
                      <option value="5000">5000 ></option>
                      <option value="5500">5500 ></option>
                      <option value="6000">6000 ></option>
                      <option value="6500">6500 ></option>
                      <option value="7000">7000 ></option>
                      <option value="10000">10000 ></option>
                      <option value="20000">20000 ></option>
                      <option value="30000">30000 ></option>
                    </select>
                  </label>
                </div>
          </div>
          <h1 class="mobile">Listing Status</h1>
          <div class="label-container">
            <label>
                <input type="checkbox" (click)=activeStatus($event) [checked]="activeSelected" >
                <span class="checkmark"></span>
                Active&nbsp;&nbsp;&nbsp;
              </label>
              <label>
                <input type="checkbox" (click)=pendingStatus($event) [checked]="pendingSelected">
                <span class="checkmark"></span>
                Pending&nbsp;&nbsp;&nbsp;
              </label>
              <label>
                <input type="checkbox" (click)=contingentStatus($event) [checked]="contingentSelected">
                <span class="checkmark"></span>
                Contingent&nbsp;&nbsp;&nbsp;
              </label>
              <label>
                <input type="checkbox" (click)=bomStatus($event) [checked]="bomSelected">
                <span class="checkmark"></span>
                BOM&nbsp;&nbsp;&nbsp;
              </label>
              <label>
                <input type="checkbox" (click)=forecloseStatus($event) [checked]="forecloseSelected">
                <span class="checkmark"></span>
                Foreclose&nbsp;&nbsp;&nbsp;
              </label>
              <label>
                <input  type="checkbox" (click)=soldStatus($event) [checked]="soldSelected">
                <span class="checkmark"></span>
                Sold
              </label>
        </div>

      </div>
</ng-template>
  
  
  
  
  
  
  